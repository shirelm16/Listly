<?xml version="1.0" encoding="utf-8" ?>
<mopups:PopupPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:mopups="clr-namespace:Mopups.Pages;assembly=Mopups"
             xmlns:viewmodel="clr-namespace:Listly.ViewModel"
             x:Class="Listly.View.EditShoppingItemPopup"
             BackgroundColor="#80000000"
             HeightRequest="300">
    <Border
        BackgroundColor="{StaticResource Surface}"
        Stroke="{StaticResource Outline}"
        StrokeThickness="1"
        Padding="24"
        Margin="20"
        VerticalOptions="End"
        HorizontalOptions="Center"
        WidthRequest="320"
        HeightRequest="240"
        StrokeShape="RoundRectangle 20">

        <Grid RowDefinitions="Auto,Auto,Auto" RowSpacing="20">

            <!-- Name input -->
            <Border Grid.Row="0"
                    Stroke="{StaticResource Outline}"
                    StrokeThickness="1"
                    Background="White"
                    StrokeShape="RoundRectangle 10"
                    HeightRequest="50">
                <Entry Text="{Binding Name, Mode=TwoWay}"
                       TextColor="{StaticResource OnSurface}"
                       BackgroundColor="Transparent"
                       Placeholder="Item name"
                       FontSize="16"
                       VerticalOptions="Center"
                       HorizontalOptions="Fill"
                       Margin="12,0"/>
            </Border>

            <!-- Quantity controls -->
            <Grid Grid.Row="1"
                  ColumnDefinitions="*,50,50" 
                  ColumnSpacing="12"
                  VerticalOptions="Center">
                <Border Grid.Column="0"
                        Stroke="{StaticResource Outline}"
                        StrokeThickness="1"
                        Background="White"
                        StrokeShape="RoundRectangle 10"
                        HeightRequest="50">
                    <Entry Placeholder="Quantity"
                           PlaceholderColor="{StaticResource OnSurfaceVariant}"
                           Text="{Binding Quantity, Mode=TwoWay}"
                           TextColor="{StaticResource OnSurface}"
                           BackgroundColor="Transparent"
                           FontSize="16"
                           VerticalOptions="Center"
                           HorizontalOptions="Fill"
                           Margin="12,0"/>
                </Border>
                
                <Button Grid.Column="1"
                        Text="-" 
                        Command="{Binding DecreaseQuantityCommand}" 
                        WidthRequest="50" 
                        HeightRequest="50"
                        CornerRadius="25"
                        BackgroundColor="{StaticResource SurfaceVariant}"
                        TextColor="{StaticResource OnSurface}"
                        FontSize="20"
                        FontAttributes="Bold"/>
                
                <Button Grid.Column="2"
                        Text="+" 
                        Command="{Binding IncreaseQuantityCommand}" 
                        WidthRequest="50" 
                        HeightRequest="50"
                        CornerRadius="25"
                        BackgroundColor="{StaticResource Primary}"
                        TextColor="{StaticResource OnPrimary}"
                        FontSize="18"
                        FontAttributes="Bold"/>
            </Grid>

            <!-- Save / Cancel -->
            <Grid Grid.Row="2" 
                  ColumnDefinitions="*,*" 
                  ColumnSpacing="16"
                  HorizontalOptions="Fill">

                <Button Grid.Column="0"
                        Text="Save" 
                        Command="{Binding SaveCommand}" 
                        BackgroundColor="{StaticResource Primary}"
                        TextColor="{StaticResource OnPrimary}"
                        HeightRequest="45"
                        CornerRadius="10"
                        FontSize="16"
                        FontAttributes="Bold"/>

                <Button Grid.Column="1"
                        Text="Cancel" 
                        Command="{Binding CancelCommand}" 
                        BackgroundColor="{StaticResource SurfaceVariant}"
                        TextColor="{StaticResource OnSurface}"
                        HeightRequest="45"
                        CornerRadius="10"
                        FontSize="16"/>
            </Grid>

        </Grid>
    </Border>
</mopups:PopupPage>